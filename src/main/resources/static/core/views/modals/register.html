<div class="modal-header">
	<h3 class="modal-title">Registration form</h3>
</div>
<div class="modal-body">
	<form name="vm.registerForm" ng-submit="vm.register(vm.registerForm.$valid)" novalidate>
		<div class="form-group" ng-class="{'has-error': vm.registerForm.usernameName.$touched && vm.registerForm.usernameName.$invalid}">
			<label for="username">Username</label>
			<input name="usernameName" id="username" class="form-control" type="text" ng-model="vm.user.username" ng-change="vm.checkUsername()" required/>
			<div class="help-block" ng-messages="vm.registerForm.usernameName.$error" ng-show="vm.registerForm.usernameName.$touched">
				<p ng-message="required">This field is required</p>
				<p ng-message="usernameExists">Already exists</p>
			</div>
		</div>
		<div class="form-group" ng-class="{'has-error': vm.registerForm.passwordName.$touched && vm.registerForm.passwordName.$invalid}">
			<label for="password">Password</label>
			<input type="password" name="passwordName" id="password" class="form-control" ng-model="vm.user.password" ng-blur="vm.checkPasswords()" required/>
			<div class="help-block" ng-messages="vm.registerForm.passwordName.$error" ng-show="vm.registerForm.passwordName.$touched">
				<p ng-message="required">This field is required</p>
			</div>
		</div>
		<div class="form-group" ng-class="{'has-error': vm.registerForm.confirmPasswordName.$touched && vm.registerForm.confirmPasswordName.$invalid}">
			<label for="confirm-password">Confirm password</label>
			<input name="confirmPasswordName" id="confirm-password" class="form-control" type="password" ng-model="vm.confirmPassword" ng-blur="vm.checkPasswords()" required/>
			<div class="help-block" ng-messages="vm.registerForm.confirmPasswordName.$error" ng-show="vm.registerForm.confirmPasswordName.$touched">
				<p ng-message="required">This field is required</p>
				<p ng-message="passwordNotSame">Passwords don't match</p>
			</div>
		</div>
		<div class="form-group" ng-class="{'has-error': vm.registerForm.firstName.$touched && vm.registerForm.firstName.$invalid}">
			<label for="first-name">First name</label>
			<input id="first-name" name="firstName" type="text" class="form-control" ng-model="vm.user.firstName" required/>
			<div class="help-block" ng-messages="vm.registerForm.firstName.$error" ng-show="vm.registerForm.firstName.$touched">
				<p ng-message="required">This field is required</p>
			</div>
		</div>
		<div class="form-group" ng-class="{'has-error': vm.registerForm.lastName.$touched && vm.registerForm.lastName.$invalid}">
			<label for="last-name">Last name</label>
			<input id="last-name" name="lastName" type="text" class="form-control" ng-model="vm.user.lastName" required/>
			<div class="help-block" ng-messages="vm.registerForm.lastName.$error" ng-show="vm.registerForm.lastName.$touched">
				<p ng-message="required">This field is required</p>
			</div>
		</div>
		<div class="form-group">
			<label>Role</label>
			<ui-select ng-model="vm.role" search-enabled="false" on-select="vm.selectedRole($item, $model)">
				<ui-select-match>{{$select.selected.name.replace("ROLE_", "")}}</ui-select-match>
				<ui-select-choices repeat="r in vm.roles">
					<span ng-bind="r.name.replace('ROLE_', '')"></span>
				</ui-select-choices>
			</ui-select>
		</div>
		<div class="form-group" ng-show="vm.role.name==='ROLE_CUSTOMER'" ng-class="{'has-error': vm.registerForm.deliveryAddressName.$touched && vm.registerForm.deliveryAddressName.$invalid}">
			<label for="delivery-address">Delivery address</label>
			<input id="delivery-address" name="deliveryAddressName" type="text" class="form-control" ng-model="vm.user.deliveryAddress" ng-required="vm.addressRequired"/>
			<div class="help-block" ng-messages="vm.registerForm.deliveryAddressName.$error" ng-show="vm.registerForm.deliveryAddressName.$touched && vm.addressRequired">
				<p ng-message="required">This field is required</p>
			</div>
		</div>
		<button type="submit" ng-hide="true"></button>
	</form>
</div>
<div class="modal-footer">
	<button class="btn btn-primary" ng-click="vm.register(vm.registerForm.$valid)">Register</button>
	<button class="btn btn-default" ng-click="vm.cancel()">Cancel</button>
</div>